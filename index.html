<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LSA Settlement Calculator</title>

<style>
*{box-sizing:border-box;}

body{
    margin:0;
    height:100vh;
    font-family:"Segoe UI", Arial, sans-serif;
    background:linear-gradient(135deg,#c7d2fe,#e0f2fe);
    display:flex;
    justify-content:center;
    align-items:center;
}

.wrapper{
    width:100%;
    max-width:1100px;
    display:flex;
    gap:25px;
}

.panel{
    flex:1;
    background:#ffffff;
    padding:30px;
    border-radius:18px;
    box-shadow:0 20px 45px rgba(0,0,0,0.15);
}

h2{
    margin-top:0;
    margin-bottom:25px;
    color:#1e293b;
    text-align:center;
}

.group{margin-bottom:18px;}

label{
    font-size:14px;
    color:#475569;
    margin-bottom:6px;
    display:block;
}

input{
    width:100%;
    padding:12px;
    border-radius:10px;
    border:1px solid #cbd5e1;
    font-size:15px;
    cursor:pointer;
    transition:.25s;
}

input:hover{border-color:#2563eb;}
input:focus{
    outline:none;
    border-color:#2563eb;
    box-shadow:0 0 0 3px rgba(37,99,235,0.2);
}

.readonly{
    background:#f1f5f9;
    font-weight:600;
}

.result{
    margin-top:15px;
    padding:14px;
    background:#f8fafc;
    border-radius:10px;
    font-weight:600;
    color:#0f172a;
}

.warning{
    margin-top:15px;
    padding:14px;
    background:#fee2e2;
    border-radius:10px;
    color:#991b1b;
    font-weight:700;
}

.consent-box{
    margin-top:20px;
    padding:16px;
    border-radius:14px;
    background:#f1f5f9;
    text-align:center;
}

.thumb-btn{
    font-size:36px;
    margin:0 20px;
    cursor:pointer;
    transition:.2s;
}

.thumb-btn:hover{transform:scale(1.2);}

.thumb-up.active{color:#16a34a;}
.thumb-down.active{color:#dc2626;}

.consent-status{
    margin-top:10px;
    font-weight:700;
}

.reset{
    margin-top:20px;
    width:100%;
    padding:12px;
    background:#334155;
    color:#fff;
    border:none;
    border-radius:12px;
    font-size:15px;
    cursor:pointer;
}

.reset:hover{background:#0f172a;}
</style>
</head>

<body>

<div class="wrapper">

<!-- LEFT PANEL -->
<div class="panel">
<h2>LSA & Interest</h2>

<div class="group">
<label>LSA Amount</label>
<input type="number" id="lsa" step="0.01">
</div>

<div class="group">
<label>Sale Date</label>
<input type="date" id="saleDate">
</div>

<div class="group">
<label>Interest Amount (18% p.a.)</label>
<input id="interest" class="readonly" readonly>
</div>

<div class="group">
<label>LSA as on Date</label>
<input id="lsaDate" class="readonly" readonly>
</div>
</div>

<!-- RIGHT PANEL -->
<div class="panel">
<h2>Waiver / Settlement</h2>

<div class="group">
<label>Enter Waiver %</label>
<input type="number" id="waiverPct" step="0.01" oninput="fromWaiver()">
</div>

<div class="group">
<label>OR Enter Settlement Amount</label>
<input type="number" id="settleAmt" step="0.01" oninput="fromSettlement()">
</div>

<div class="result" id="resultText">
Settlement details will appear here.
</div>

<div class="warning" id="warningText" style="display:none;"></div>

<!-- Consent -->
<div class="consent-box">
<div>
<span class="thumb-btn thumb-up" onclick="setConsent(true)">üëç</span>
<span class="thumb-btn thumb-down" onclick="setConsent(false)">üëé</span>
</div>
<div class="consent-status" id="consentStatus">
Customer response not recorded
</div>
</div>

<button class="reset" onclick="resetAll()">Reset</button>
</div>

</div>

<script>
let totalAmount=0, lsaWithInterest=0;

document.querySelectorAll("#lsa,#saleDate").forEach(el=>{
    el.addEventListener("input",calculateBase);
});

function calculateBase(){
    let lsaVal=+lsa.value||0;
    let saleDt=new Date(saleDate.value);
    if(!lsaVal || !saleDate.value) return;

    let today=new Date();
    if(saleDt>today) return;

    let months =
        (today.getFullYear()-saleDt.getFullYear())*12 +
        (today.getMonth()-saleDt.getMonth());

    if(today.getDate() < saleDt.getDate()) months--;
    if(months<0) months=0;

    totalAmount=lsaVal;
    let interestAmt=totalAmount*0.18*(months/12);
    lsaWithInterest=totalAmount+interestAmt;

    interest.value=interestAmt.toFixed(2);
    lsaDate.value=lsaWithInterest.toFixed(2);
}

function fromWaiver(){
    settleAmt.value="";
    let waiver=+waiverPct.value;
    if(!waiver || !lsaWithInterest) return;

    let recover=100-waiver;
    let withInt=lsaWithInterest*(recover/100);
    let withoutInt=totalAmount*(recover/100);

    resultText.innerHTML=
    `Settlement (With Interest): ‚Çπ${withInt.toFixed(2)}<br>
     Settlement (Without Interest): ‚Çπ${withoutInt.toFixed(2)}`;

    policyCheck(waiver);
}

function fromSettlement(){
    waiverPct.value="";
    let settle=+settleAmt.value;
    if(!settle || !lsaWithInterest) return;

    let waiver=100-(settle/lsaWithInterest)*100;

    resultText.innerHTML=
    `Calculated Waiver: ${waiver.toFixed(2)}%`;

    policyCheck(waiver);
}

function policyCheck(waiver){
    let saleYr=new Date(saleDate.value).getFullYear();
    let max=saleYr>2020?70:74;

    if(waiver>max){
        warningText.style.display="block";
        warningText.innerHTML=
        `‚ö†Ô∏è Waiver exceeds policy limit (${max}%).<br>
         Manager consent is mandatory.`;
    }else{
        warningText.style.display="none";
    }
}

function setConsent(agreed){
    document.querySelector(".thumb-up").classList.remove("active");
    document.querySelector(".thumb-down").classList.remove("active");

    if(agreed){
        document.querySelector(".thumb-up").classList.add("active");
        consentStatus.innerHTML="Customer agreed to the settlement";
        consentStatus.style.color="#16a34a";
    }else{
        document.querySelector(".thumb-down").classList.add("active");
        consentStatus.innerHTML="Customer did not agree to the settlement";
        consentStatus.style.color="#dc2626";
    }
}

function resetAll(){
    document.querySelectorAll("input").forEach(i=>i.value="");
    resultText.innerHTML="Settlement details will appear here.";
    warningText.style.display="none";
    consentStatus.innerHTML="Customer response not recorded";
    consentStatus.style.color="#0f172a";
    document.querySelector(".thumb-up").classList.remove("active");
    document.querySelector(".thumb-down").classList.remove("active");
}
</script>

</body>
</html>
